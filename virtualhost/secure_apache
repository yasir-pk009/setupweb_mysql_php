#set up an SSL certificate using Certbot

sudo apt-get update
sudo apt-get install certbot
sudo apt-get install python3-certbot-apache


certbot -d <server-configuration file>

#secure Apache using the <Directory>

<Directory /path/to/directory>
    Require all denied 
    Require ip 192.168.1.0/24
</Directory>


# secure Apache using the <Files>

<Files "*.html"> # "*" means all files that are starting with .pdf
    Require ip 192.168.1.0/24
</Files>



#Enable the necessary Apache modules

sudo a2enmod auth_digest

sudo htdigest -c /etc/apache2/.htpasswd  myserver yasir  # -c option will create passwd file if that not all ready exit 


#edit configurration file .make sure authname 
<Directory /var/www/html/protected-area>
    AuthType Digest
    AuthName "myserver"
    AuthDigestDomain /protected-area
    AuthDigestProvider file
    AuthUserFile /etc/apache2/.htdigest
    Require valid-user
</Directory>



#checking webserver status by status mod 

a2enmod status 

vim /etc/apache2/mod-available/status 

      # Allow server status reports generated by mod_status,
        # with the URL of http://servername/server-status
        # Uncomment and change the "192.0.2.0/24" to allow access from other hosts.

        <Location /server-status>
                SetHandler server-status
                Require local
                #Require ip 192.0.2.0/24
                Require ip 192.168.18.92
        </Location>

        # Keep track of extended status information for each request
        ExtendedStatus On

        # Determine if mod_status displays the first 63 characters of a request or
        # the last 63, assuming the request itself is greater than 63 chars.
        # Default: Off
        #SeeRequestTail On


        <IfModule mod_proxy.c>
                # Show Proxy LoadBalancer status in mod_status
                ProxyStatus On
        </IfModule>



